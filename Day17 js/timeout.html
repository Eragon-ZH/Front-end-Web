<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Timeout</title>
</head>
<body>
    <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
    <button id="fade-btn">淡出</button>

    <script type="text/javascript">
        a = 1;
        var obj = document.getElementById("fade-obj");
        var btn = document.getElementById("fade-btn");
        function fade() {
            btn.disabled = true;
            if ( btn.innerHTML == "淡出" ) {
                a -= 0.01;
            }
            if ( btn.innerHTML == "淡入" ) {
                a += 0.01;
            }
            obj.style.opacity = a;
            console.log(a);
            t = setTimeout(fade,20);
            if ( a < 0 ) {
                clearTimeout(t);
                btn.disabled = false;
                btn.innerHTML = "淡入";
            }
            if ( a > 1 ) {
                clearTimeout(t);
                btn.disabled = false;
                btn.innerHTML = "淡出";
            }
        }
        btn.onclick = fade;

    </script>
</body>
</html>
